{"version":3,"file":"HeroMaskIntro.js","sources":["../../../src/HeroMaskIntro/HeroMaskIntro.js"],"sourcesContent":["import React, { useRef } from 'react'\nimport { useIsomorphicLayoutEffect } from 'react-use'\nimport { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock'\nimport { gsap } from 'gsap'\nimport { ExpoScaleEase } from 'gsap/EasePack'\nimport { ScrollToPlugin } from 'gsap/ScrollToPlugin'\nimport { ScrollTrigger } from 'gsap/ScrollTrigger'\nimport styled from 'styled-components'\n\nimport { useEnhancedContext } from '../_contexts/Enhanced'\nimport { useIntroContext } from '../_contexts/Intro'\nimport { match } from '../_contexts/Theme'\nimport useInstance from '../_hooks/useInstance'\nimport KlickLogo from '../KlickLogo/KlickLogo'\nimport ScrollIndicator from '../ScrollIndicator/ScrollIndicator'\nimport Section from '../Section/Section'\nimport { Heading } from '../Typography/Typography'\n\nimport CircleMask from './CircleMask'\n\ngsap.registerPlugin(ScrollTrigger)\ngsap.registerPlugin(ExpoScaleEase)\ngsap.registerPlugin(ScrollToPlugin)\n\nconst eyeBrowBarHeight = 48\nconst HeroMaskIntro = ({\n  initialBackground,\n  background,\n  headline,\n  onIntroComplete,\n  skipAutoScroll = false,\n  isGradientOverlayEnabled = false,\n  top = `${eyeBrowBarHeight}px`,\n  height = `calc(100vh - ${eyeBrowBarHeight}px)`,\n  enhancedOverride,\n  ...restProps\n}) => {\n  const { enhanced: enhancedContext } = useEnhancedContext()\n  const enhanced = enhancedOverride ?? enhancedContext\n  const { skipIntro, setSkipIntro } = useIntroContext()\n\n  const mainTimeline = useInstance(() => gsap.timeline({ paused: true }))\n  const introTimeline = useInstance(() => gsap.timeline())\n  const logoTimeline = useInstance(() => gsap.timeline())\n  const scrollTimeline = useInstance(() => gsap.timeline())\n\n  const stickyContainerRef = useRef()\n  const svg = useRef()\n  const letterK1 = useRef()\n  const letterL = useRef()\n  const letterI = useRef()\n  const letterC = useRef()\n  const letterK2 = useRef()\n  const dot = useRef()\n  const subHead = useRef()\n  const headlineRef = useRef()\n  const scrollIndicatorRef = useRef()\n  const sectionRef = useRef()\n\n  useIsomorphicLayoutEffect(() => {\n    // SETUP LOGO INTRO ANIMATION\n    if (skipIntro || !enhanced) return\n    if (window.scrollY > 0) {\n      setSkipIntro(true)\n      return\n    }\n    let scrollTimeout\n    let handleScroll\n    let handleClick\n    let hasClicked = false\n\n    const animationRefs = {\n      mainTimeline,\n      introTimeline,\n      scrollTimeline,\n      logoTimeline,\n      svg,\n      letterK1,\n      letterL,\n      letterI,\n      letterC,\n      letterK2,\n      dot,\n      subHead,\n      headlineRef,\n      scrollIndicatorRef,\n    }\n    mainTimeline.add(introTimeline, 0)\n    mainTimeline.add(logoTimeline, 0)\n    buildLogoAnimation(animationRefs)\n\n    const currentRef = sectionRef.current\n\n    disableBodyScroll(currentRef)\n\n    mainTimeline.play()\n\n    handleClick = () => {\n      hasClicked = true\n      window.removeEventListener('click', handleClick)\n    }\n    window.addEventListener('click', handleClick)\n\n    logoTimeline.eventCallback('onComplete', () => {\n      scrollTimeout = setTimeout(() => {\n        if (window.scrollY === 0 && !hasClicked && !skipAutoScroll) {\n          const percentage = 0.65\n          const totalHeight = stickyContainerRef.current.offsetHeight\n          const scrollTarget = totalHeight * percentage\n          gsap.to(window, {\n            duration: 1,\n            scrollTo: { y: scrollTarget },\n          })\n        }\n        onIntroComplete && onIntroComplete()\n        setSkipIntro(true)\n        window.removeEventListener('scroll', handleScroll)\n        window.removeEventListener('click', handleClick)\n      }, 1000)\n      enableBodyScroll(currentRef)\n    })\n    return () => {\n      enableBodyScroll(currentRef)\n      window.removeEventListener('scroll', handleScroll)\n      window.removeEventListener('click', handleClick)\n      scrollTimeout && clearTimeout(scrollTimeout)\n      removeLogoAnimation(animationRefs)\n    }\n  }, [\n    enhanced,\n    introTimeline,\n    logoTimeline,\n    mainTimeline,\n    scrollTimeline,\n    onIntroComplete,\n    setSkipIntro,\n    skipIntro,\n    skipAutoScroll,\n  ])\n\n  useIsomorphicLayoutEffect(() => {\n    // SET UP SCROLLABLE PORTION OF INTRO\n    if (enhanced && skipIntro) {\n      scrollTimeline.fromTo(\n        [headlineRef.current, scrollIndicatorRef.current],\n        { autoAlpha: 1 },\n        { duration: 2, autoAlpha: 0 },\n        0\n      )\n      const scrollTrigger = ScrollTrigger.create({\n        trigger: stickyContainerRef.current,\n        start: 'top top',\n        end: 'bottom bottom',\n        animation: scrollTimeline,\n        scrub: true,\n      })\n\n      return () => {\n        scrollTrigger && scrollTrigger.kill()\n      }\n    }\n  }, [enhanced, skipIntro, scrollTimeline])\n\n  return (\n    <Section ref={sectionRef} {...restProps} pt={0} pb={0}>\n      <StickyContainer enhanced={enhanced} ref={stickyContainerRef}>\n        <StickyElement top={top} heroHeight={height}>\n          {!!initialBackground && initialBackground}\n          <HeroContent>\n            <Headline\n              variant=\"h1\"\n              ref={headlineRef}\n              $skipIntro={skipIntro || !enhanced}\n            >\n              {headline}\n            </Headline>\n            <LogoContainer ref={svg}>\n              <LogoSVG\n                shapeK1Ref={letterK1}\n                shapeLRef={letterL}\n                shapeIRef={letterI}\n                shapeCRef={letterC}\n                shapeK2Ref={letterK2}\n                shapeDotRef={dot}\n                shapeSubRef={subHead}\n              />\n            </LogoContainer>\n            {enhanced ? (\n              <CircleMask\n                background={background}\n                dot={dot}\n                skipIntro={skipIntro}\n                mainIntroTimeline={introTimeline}\n                isGradientOverlayEnabled={isGradientOverlayEnabled}\n                mainScrollTimeline={scrollTimeline}\n              />\n            ) : (\n              <BrandDot />\n            )}\n            <ScrollIndicatorContainer ref={scrollIndicatorRef}>\n              <ScrollIndicator />\n            </ScrollIndicatorContainer>\n          </HeroContent>\n          {!enhanced && <BackgroundContent>{background}</BackgroundContent>}\n        </StickyElement>\n      </StickyContainer>\n    </Section>\n  )\n}\n\nconst buildLogoAnimation = (animationRefs) => {\n  const {\n    logoTimeline,\n    svg,\n    letterK1,\n    letterL,\n    letterI,\n    letterC,\n    letterK2,\n    dot,\n    subHead,\n    headlineRef,\n    scrollIndicatorRef,\n  } = animationRefs\n  gsap.set(dot.current, { opacity: 0 })\n  gsap.set(svg.current, { opacity: 1 })\n  logoTimeline.fromTo(\n    [\n      letterK1.current,\n      letterL.current,\n      letterI.current,\n      letterC.current,\n      letterK2.current,\n    ],\n    { opacity: 0 },\n    {\n      duration: 0.5,\n      opacity: 1,\n      ease: 'expo.inOut',\n    },\n    0\n  )\n\n  logoTimeline.from(\n    letterK1.current,\n    {\n      duration: 0.5,\n      y: -200,\n    },\n    0\n  )\n\n  logoTimeline.from(\n    letterL.current,\n    {\n      duration: 0.5,\n      x: 50,\n      y: -150,\n    },\n    0\n  )\n\n  logoTimeline.from(\n    letterI.current,\n    {\n      duration: 0.5,\n      y: -100,\n    },\n    0\n  )\n\n  logoTimeline.from(\n    letterC.current,\n    {\n      duration: 0.5,\n      rotation: 270,\n      transformOrigin: '100% 0%',\n    },\n    0\n  )\n\n  logoTimeline.from(\n    letterK2.current,\n    {\n      duration: 0.5,\n      y: 200,\n    },\n    0\n  )\n\n  logoTimeline.fromTo(\n    subHead.current,\n    { opacity: 0 },\n    {\n      duration: 1,\n      opacity: 1,\n      ease: 'expo.inOut',\n    },\n    0.3\n  )\n\n  const dotData = dot.current.getBoundingClientRect()\n  const targetRadius = (window.innerHeight * 0.75) / 2\n  const targetScale = targetRadius / (dotData.width / 2)\n  logoTimeline.to(\n    svg.current,\n    {\n      duration: 0.7,\n      scale: targetScale,\n      transformOrigin: '80% 50%',\n      autoAlpha: 0,\n      ease: ExpoScaleEase.config(1, targetScale, 'expo'),\n    },\n    1.5\n  )\n\n  const titleLines = headlineRef.current.getElementsByTagName('span')\n  logoTimeline.fromTo(\n    titleLines,\n    {\n      opacity: 0,\n    },\n    {\n      duration: 0.5,\n      stagger: 0.05,\n      opacity: 1,\n    },\n    1.8\n  )\n\n  logoTimeline.from(\n    titleLines,\n    {\n      duration: 0.5,\n      stagger: 0.1,\n      y: '100%',\n      rotationX: -80,\n      ease: 'power2',\n    },\n    1.8\n  )\n  logoTimeline.fromTo(\n    scrollIndicatorRef.current,\n    { opacity: 0 },\n    { duration: 0.5, opacity: 1 },\n    1.8\n  )\n}\n\nconst removeLogoAnimation = (animationRefs) => {\n  const {\n    mainTimeline,\n    introTimeline,\n    logoTimeline,\n    svg,\n    letterK1,\n    letterL,\n    letterI,\n    letterC,\n    letterK2,\n    dot,\n    subHead,\n    headlineRef,\n    scrollIndicatorRef,\n  } = animationRefs\n  logoTimeline.clear()\n  mainTimeline.remove(introTimeline)\n  mainTimeline.remove(logoTimeline)\n  logoTimeline.clear()\n  introTimeline.clear()\n  mainTimeline.clear()\n\n  const titleLines = headlineRef.current.getElementsByTagName('span')\n  gsap.set(\n    [\n      svg.current,\n      letterK1.current,\n      letterL.current,\n      letterI.current,\n      letterC.current,\n      letterK2.current,\n      dot.current,\n      subHead.current,\n      headlineRef.current,\n      scrollIndicatorRef.current,\n      titleLines,\n    ],\n    { clearProps: 'all' }\n  )\n}\n\nconst stickyLength = '2000px'\nconst stickyLengthSm = '4000px'\n\nconst StickyContainer = styled.div`\n  width: 100%;\n  height: ${stickyLength};\n  ${(props) =>\n    !props.enhanced &&\n    `\n      height: auto;\n\n      ${StickyElement} {\n        position: relative;\n        height: auto;\n        top: 0;\n      }\n\n      ${HeroContent} {\n        position: relative;\n        height: 100vh;\n      }\n\n      ${BackgroundContent} {\n        height: 100vh;\n        position: static;\n      }\n    `};\n\n  ${match.isSM} {\n    height: ${({ enhanced }) => (enhanced ? stickyLengthSm : 'auto')};\n  }\n`\n\nconst ScrollIndicatorContainer = styled.div`\n  position: absolute;\n  z-index: 3;\n  bottom: 90px;\n  left: 50%;\n  transform: translate(-50%, 0);\n  opacity: 0;\n\n  ${match.isMD} {\n    bottom: 50px;\n  }\n`\n\nconst BrandDot = styled.div`\n  position: absolute;\n  background: ${({ theme }) => theme.palette.primary.main};\n  border-radius: 50%;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n\n  @media ${match.isLandscape} {\n    height: 75vh;\n    width: 75vh;\n  }\n\n  @media ${match.isPortrait} {\n    height: 75vw;\n    width: 75vw;\n  }\n`\n\nconst StickyElement = styled.div`\n  width: 100%;\n  height: ${({ heroHeight }) => heroHeight};\n  position: sticky;\n  overflow: hidden;\n  top: ${({ top }) => top};\n`\n\nconst HeroContent = styled.div``\nconst BackgroundContent = styled.div`\n  overflow: hidden;\n  position: relative;\n  height: 100%;\n  width: 100%;\n`\n\nconst Headline = styled(Heading)`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  transform: translate(-50%, -50%);\n  z-index: 3;\n  text-align: center;\n  perspective: 600;\n  margin: 0;\n\n  > span {\n    transform-origin: center top;\n    display: block;\n    opacity: ${({ $skipIntro }) => ($skipIntro ? 1 : 0)};\n  }\n`\n\nconst LogoContainer = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  margin: 0;\n  padding: 0;\n  z-index: 3;\n  max-width: 100px;\n  pointer-events: none;\n  opacity: 0;\n\n  ${match.isSM} {\n    max-width: 150px;\n  }\n\n  ${match.isMD} {\n    max-width: 250px;\n  }\n\n  @media (orientation: landscape) {\n    height: 50vh;\n    width: auto;\n  }\n  @media (orientation: portrait) {\n    width: 50vw;\n  }\n`\n\nconst LogoSVG = styled(KlickLogo)`\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  transform: scale(1);\n`\nexport default HeroMaskIntro\n"],"names":["gsap","registerPlugin","ScrollTrigger","ExpoScaleEase","ScrollToPlugin","eyeBrowBarHeight","HeroMaskIntro","initialBackground","background","headline","onIntroComplete","skipAutoScroll","isGradientOverlayEnabled","top","height","enhancedOverride","restProps","useEnhancedContext","enhancedContext","enhanced","useIntroContext","skipIntro","setSkipIntro","mainTimeline","useInstance","timeline","paused","introTimeline","logoTimeline","scrollTimeline","stickyContainerRef","useRef","svg","letterK1","letterL","letterI","letterC","letterK2","dot","subHead","headlineRef","scrollIndicatorRef","sectionRef","useIsomorphicLayoutEffect","window","scrollY","scrollTimeout","handleScroll","handleClick","hasClicked","animationRefs","add","buildLogoAnimation","currentRef","current","disableBodyScroll","play","removeEventListener","addEventListener","eventCallback","setTimeout","percentage","totalHeight","offsetHeight","scrollTarget","to","duration","scrollTo","y","enableBodyScroll","clearTimeout","removeLogoAnimation","fromTo","autoAlpha","scrollTrigger","create","trigger","start","end","animation","scrub","kill","CircleMask","set","opacity","ease","from","x","rotation","transformOrigin","dotData","getBoundingClientRect","targetRadius","innerHeight","targetScale","width","scale","config","titleLines","getElementsByTagName","stagger","rotationX","clear","remove","clearProps","stickyLength","stickyLengthSm","StickyContainer","styled","div","props","StickyElement","HeroContent","BackgroundContent","match","isSM","ScrollIndicatorContainer","isMD","BrandDot","theme","palette","primary","main","isLandscape","isPortrait","heroHeight","Headline","Heading","$skipIntro","LogoContainer","LogoSVG","KlickLogo"],"mappings":"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"}