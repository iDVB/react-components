{"version":3,"file":"useIntersect.js","sources":["../../../src/_hooks/useIntersect.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react'\n\nimport { isIntersectionObserverSupported } from '../_common/utils'\n\nconst useIntersect = ({ root = null, rootMargin, threshold = 0 } = {}) => {\n  const [entry, setEntry] = useState({})\n  const [node, setNode] = useState(null)\n  const observer = useRef(null)\n\n  useEffect(() => {\n    if (!isIntersectionObserverSupported()) {\n      return\n    }\n\n    if (observer.current) {\n      observer.current.disconnect()\n    }\n\n    observer.current = new window.IntersectionObserver(\n      ([entry]) => setEntry(entry),\n      { root, rootMargin, threshold }\n    )\n\n    const { current: currentObserver } = observer\n\n    if (node) {\n      currentObserver.observe(node)\n    }\n\n    return () => currentObserver.disconnect()\n  }, [node, root, rootMargin, threshold])\n\n  return [setNode, entry]\n}\n\nexport default useIntersect\n"],"names":["useIntersect","root","rootMargin","threshold","useState","entry","setEntry","node","setNode","observer","useRef","useEffect","isIntersectionObserverSupported","current","disconnect","window","IntersectionObserver","currentObserver","observe"],"mappings":";;;;IAIMA,YAAY,GAAG,SAAfA,YAAe,GAAqD;AAAA,iFAAP,EAAO;AAAA,uBAAlDC,IAAkD;AAAA,MAAlDA,IAAkD,0BAA3C,IAA2C;AAAA,MAArCC,UAAqC,QAArCA,UAAqC;AAAA,4BAAzBC,SAAyB;AAAA,MAAzBA,SAAyB,+BAAb,CAAa;;AAAA,kBAC9CC,QAAQ,CAAC,EAAD,CADsC;AAAA;AAAA,MACjEC,KADiE;AAAA,MAC1DC,QAD0D;;AAAA,mBAEhDF,QAAQ,CAAC,IAAD,CAFwC;AAAA;AAAA,MAEjEG,IAFiE;AAAA,MAE3DC,OAF2D;;AAGxE,MAAMC,QAAQ,GAAGC,MAAM,CAAC,IAAD,CAAvB;AAEAC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACC,+BAA+B,EAApC,EAAwC;AACtC;AACD;;AAED,QAAIH,QAAQ,CAACI,OAAb,EAAsB;AACpBJ,MAAAA,QAAQ,CAACI,OAAT,CAAiBC,UAAjB;AACD;;AAEDL,IAAAA,QAAQ,CAACI,OAAT,GAAmB,IAAIE,MAAM,CAACC,oBAAX,CACjB;AAAA;AAAA,UAAEX,KAAF;;AAAA,aAAaC,QAAQ,CAACD,KAAD,CAArB;AAAA,KADiB,EAEjB;AAAEJ,MAAAA,IAAI,EAAJA,IAAF;AAAQC,MAAAA,UAAU,EAAVA,UAAR;AAAoBC,MAAAA,SAAS,EAATA;AAApB,KAFiB,CAAnB;AATc,QAcGc,eAdH,GAcuBR,QAdvB,CAcNI,OAdM;;AAgBd,QAAIN,IAAJ,EAAU;AACRU,MAAAA,eAAe,CAACC,OAAhB,CAAwBX,IAAxB;AACD;;AAED,WAAO;AAAA,aAAMU,eAAe,CAACH,UAAhB,EAAN;AAAA,KAAP;AACD,GArBQ,EAqBN,CAACP,IAAD,EAAON,IAAP,EAAaC,UAAb,EAAyBC,SAAzB,CArBM,CAAT;AAuBA,SAAO,CAACK,OAAD,EAAUH,KAAV,CAAP;AACD;;;;"}