{"version":3,"file":"SegmentScript.js","sources":["../../../src/SegmentScript/SegmentScript.js"],"sourcesContent":["import React from 'react'\n\n// initSegmentSnippet: Note that we remove the `analytics.load(SEGMENT_KEY)` from this snippet, because that is to be controlled by the consent manager component.\n// Docs: https://github.com/segmentio/consent-manager#usage\nconst initSegmentSnippet = `\n    !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error(\"Segment snippet included twice.\");else{analytics.invoked=!0;analytics.methods=[\"trackSubmit\",\"trackClick\",\"trackLink\",\"trackForm\",\"pageview\",\"identify\",\"reset\",\"group\",\"track\",\"ready\",\"alias\",\"debug\",\"page\",\"once\",\"off\",\"on\",\"addSourceMiddleware\",\"addIntegrationMiddleware\",\"setAnonymousId\",\"addDestinationMiddleware\"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement(\"script\");t.type=\"text/javascript\";t.async=!0;t.src=\"https://cdn.segment.com/analytics.js/v1/\" + key + \"/analytics.min.js\";var n=document.getElementsByTagName(\"script\")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics.SNIPPET_VERSION=\"4.13.1\";\n    analytics.load(\"${process.env.GATSBY_SEGMENT_KEY}\")\n    }}();\n`\n\nconst SegmentScript = () => {\n  if (!process.env.GATSBY_SEGMENT_KEY)\n    throw new Error('process.env.GATSBY_SEGMENT_KEY must exist.')\n\n  return (\n    <script\n      dangerouslySetInnerHTML={{\n        __html: initSegmentSnippet,\n      }}\n    />\n  )\n}\n\nexport default SegmentScript\n"],"names":["initSegmentSnippet","process","env","GATSBY_SEGMENT_KEY","SegmentScript","Error","__html"],"mappings":";;AAGA;;AACA,IAAMA,kBAAkB,4nCAEFC,OAAO,CAACC,GAAR,CAAYC,kBAFV,qBAAxB;;IAMMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,MAAI,CAACH,OAAO,CAACC,GAAR,CAAYC,kBAAjB,EACE,MAAM,IAAIE,KAAJ,CAAU,4CAAV,CAAN;AAEF,sBACE;AACE,IAAA,uBAAuB,EAAE;AACvBC,MAAAA,MAAM,EAAEN;AADe;AAD3B,IADF;AAOD;;;;"}