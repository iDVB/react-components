{"version":3,"file":"Ecosystem.js","sources":["../../../src/Ecosystem/Ecosystem.js"],"sourcesContent":["// www.independent-software.com/deconstructing-css-3-making-of-css3-solar-system-animation-3d-transformations.html\n\nimport React from 'react'\nimport { useIsomorphicLayoutEffect } from 'react-use'\nimport { useMediaQuery, useTheme } from '@material-ui/core'\nimport { gsap } from 'gsap'\nimport { ScrollTrigger } from 'gsap/ScrollTrigger'\nimport styled from 'styled-components'\n\nimport { match } from '../_contexts/Theme'\nimport useInstance from '../_hooks/useInstance'\nimport KlickLogo from '../KlickLogo/KlickLogo'\n\nimport Planet from './Planet'\nimport Ring from './Ring'\n\ngsap.registerPlugin(ScrollTrigger)\n\nconst anglePlayhead = { playhead: 0 }\n\nconst gsapDefaults = { duration: 1, ease: 'none' }\n\nconst Ecosystem = ({ planets }) => {\n  const stickyContainerRef = React.useRef()\n  const galaxyRef = React.useRef()\n  const planetsAngleTimeline = useInstance(() =>\n    gsap.timeline({\n      paused: true,\n      defaults: gsapDefaults,\n    })\n  )\n  const planetsWTimelines = useInstance(() => {\n    return planets.map((planet) => ({\n      ...planet,\n      position: 0,\n      labelRef: React.createRef(),\n      contentRef: React.createRef(),\n      angleTimeline: planetsAngleTimeline,\n      orbitTimeline: gsap.timeline({\n        paused: true,\n        defaults: gsapDefaults,\n      }),\n    }))\n  })\n  const megaTimeline = useInstance(() =>\n    gsap.timeline({\n      defaults: gsapDefaults,\n    })\n  )\n  const trailingPlanetLabels = React.useMemo(() => {\n    return planets\n      .filter((item) => !!item.trailingPlanetLabel)\n      .map((item) => item.trailingPlanetLabel)\n  }, [planets])\n\n  const theme = useTheme()\n  const isMobile = useMediaQuery(theme.breakpoints.down('xs'))\n\n  let planetJSX = []\n  let planetContentJSX = []\n  planetsWTimelines.forEach((props, index) => {\n    planetJSX.push(\n      <Planet\n        key={index}\n        isMobile={isMobile}\n        hasTrailingPlanet={!!props.trailingPlanetLabel}\n        {...props}\n      />\n    )\n    planetContentJSX.push(\n      <PlanetContent\n        ref={props.contentRef}\n        variant=\"blurb1\"\n        key={index}\n        $color={props.color}\n      >\n        {props.content}\n      </PlanetContent>\n    )\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    const galaxy = galaxyRef.current\n    const stickyContainer = stickyContainerRef.current\n\n    // ZOOM\n    megaTimeline.to({}, { duration: 2 }).add('zoom')\n    planetsWTimelines.forEach((planet) => {\n      megaTimeline\n        .to(planet.labelRef.current, { opacity: 0, duration: 0.2 }, 'zoom')\n        .fromTo(\n          planet,\n          { position: planet.startPosition },\n          { position: 0.75 },\n          'zoom+=0.8'\n        )\n    })\n    megaTimeline\n      .to(\n        galaxy,\n        {\n          x: '-27%',\n          y: -100,\n          z: 250,\n          rotationX: isMobile ? 45 : 65,\n          duration: 3,\n          ease: 'power2.inOut',\n        },\n        'zoom'\n      )\n      .to(\n        anglePlayhead,\n        { playhead: 0.5, duration: 3, ease: 'power2.inOut' },\n        'zoom'\n      )\n\n    // ORBIT\n    megaTimeline.add('orbit')\n    planetsWTimelines.forEach((planet, index) => {\n      if (trailingPlanetLabels.includes(planet.label)) return\n\n      const content = planet.contentRef.current\n      const hasTrailingPlanet = !!planet.trailingPlanetLabel\n\n      // this makes the position \"wrap\" between 0 and 1, so when it reaches 1.25, it will actually set to 0.25\n      const wrapPositionBetweenRange = gsap.utils.wrap(0, 1)\n\n      const trailingPlanet = planetsWTimelines.find(\n        (p) => p.label === planet.trailingPlanetLabel\n      )\n\n      const currentPlanets = [planet, trailingPlanet].filter(Boolean)\n\n      const currentPlanetLabels = [\n        planet.labelRef.current,\n        trailingPlanet?.labelRef?.current,\n      ]\n\n      megaTimeline\n        .set(currentPlanetLabels, { clearProps: 'fontSize,lineHeight,x,y' })\n        .set(\n          currentPlanetLabels,\n          getPlanetLabelSettings({ isMobile, hasTrailingPlanet })\n        )\n        .to(\n          currentPlanets,\n          {\n            position: hasTrailingPlanet ? gsap.utils.wrap([1.27, 1.23]) : 1.25,\n            ease: 'power1.out',\n            stagger: 0.05,\n            duration: 2,\n            modifiers: {\n              position: (pos) => wrapPositionBetweenRange(pos),\n            },\n          },\n          index === 0 ? 'orbit' : '-=0.8'\n        )\n        .to(currentPlanetLabels, { opacity: 1 }, '>-1')\n        .to(content, { opacity: 1, visibility: 'visible' }, '>')\n        .to(currentPlanets, { position: 0.75, ease: 'power1.in' }, '>2')\n        .to(currentPlanetLabels, { opacity: 0, duration: 0.5 }, '>-1.5')\n        .set(\n          currentPlanetLabels,\n          getPlanetLabelSettings({ isMobile, hasTrailingPlanet })\n        )\n        .set(currentPlanetLabels, { clearProps: 'fontSize,lineHeight,x,y' })\n        .to(\n          content,\n          { opacity: 0, visibility: 'hidden', duration: 0.5 },\n          '>-1.5'\n        )\n    })\n\n    // ZOOM OUT\n    megaTimeline.add('zoomOut')\n    planetsWTimelines\n      .slice()\n      .reverse()\n      .forEach((planet, index) => {\n        if (planet.startPosition > 0.5) {\n          megaTimeline.to(\n            planet,\n            { position: planet.startPosition },\n            `zoomOut+=${index * 0.5}`\n          )\n        } else {\n          megaTimeline\n            .to(planet, { position: 1 }, `zoomOut+=${index * 0.5}`)\n            .fromTo(\n              planet,\n              { position: 0 },\n              { position: planet.startPosition, ease: 'power1.out' },\n              '>'\n            )\n        }\n        megaTimeline.to(\n          planet.labelRef.current,\n          { opacity: 1, duration: 0.2 },\n          '>-0.2'\n        )\n      })\n    megaTimeline\n      .to(\n        galaxy,\n        {\n          x: '0%',\n          y: 0,\n          z: 0,\n          rotationX: 0,\n          duration: 3,\n          ease: 'power2.inOut',\n        },\n        'zoomOut+=1.2'\n      )\n      .to(\n        anglePlayhead,\n        { playhead: 1, duration: 3, ease: 'power2.inOut' },\n        'zoomOut+=1.2'\n      )\n      .to({}, { duration: 2 })\n\n    const scrollTrigger = ScrollTrigger.create({\n      trigger: stickyContainer,\n      scrub: true,\n      start: 'top top',\n      end: 'bottom bottom',\n      animation: megaTimeline,\n      onUpdate: function () {\n        planetsAngleTimeline.progress(anglePlayhead.playhead || 0)\n\n        planetsWTimelines.forEach((planet) => {\n          planet.orbitTimeline.progress(planet.position || planet.startPosition)\n        })\n      },\n    })\n\n    return () => {\n      planetsAngleTimeline.clear()\n      megaTimeline.remove(planetsAngleTimeline)\n\n      planetsWTimelines.forEach((planet) => {\n        planet.orbitTimeline.clear()\n      })\n      megaTimeline.clear()\n      scrollTrigger.kill()\n    }\n  }, [\n    megaTimeline,\n    planetsAngleTimeline,\n    planetsWTimelines,\n    isMobile,\n    trailingPlanetLabels,\n  ])\n\n  return (\n    <StickyContainer ref={stickyContainerRef}>\n      <StyledConstellation>\n        <Universe>\n          <Galaxy ref={galaxyRef}>\n            <SolarSystem>\n              <Ring width=\"100%\" />\n              <Ring width=\"78%\" />\n              <Ring width=\"55%\" color=\"rgb(0 0 0 / 100%)\" />\n              <StyledLogo brandName=\"group\" />\n              {planetJSX}\n            </SolarSystem>\n          </Galaxy>\n          {planetContentJSX}\n        </Universe>\n      </StyledConstellation>\n    </StickyContainer>\n  )\n}\n\nfunction getPlanetLabelSettings({ isMobile, hasTrailingPlanet }) {\n  const lookup = {\n    withTrailingPlanet: {\n      mobile: {\n        fontSize: '4vw',\n        x: gsap.utils.wrap(['-120%', undefined]),\n        y: gsap.utils.wrap(['45%', undefined]),\n      },\n      desktop: {\n        fontSize: gsap.utils.wrap(['2vw', '3vw']),\n        x: gsap.utils.wrap(['30%', undefined]),\n        y: gsap.utils.wrap(['45%', undefined]),\n      },\n    },\n    withoutTrailingPlanet: {\n      mobile: {\n        fontSize: '4vw',\n      },\n      desktop: {\n        fontSize: '4vw',\n      },\n    },\n  }\n\n  const planetKey = hasTrailingPlanet\n    ? 'withTrailingPlanet'\n    : 'withoutTrailingPlanet'\n  const mobileKey = isMobile ? 'mobile' : 'desktop'\n\n  return lookup[planetKey][mobileKey]\n}\n\nconst PlanetContent = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  display: flex;\n  justify-content: center;\n  width: 90%;\n  text-align: left;\n  transform: translate(-50%, 10%);\n  opacity: 0;\n  visibility: hidden;\n\n  & > p {\n    ${match.isLG} {\n      max-width: 100%;\n      width: 600px;\n      transform: translateX(50%);\n    }\n  }\n\n  & > ul {\n    column-count: 2;\n    padding-left: 6%;\n    font-size: 1rem;\n  }\n  & > ul > li {\n    padding-left: 1em;\n    margin-bottom: 0.7em;\n  }\n  & > ul > li:before {\n    color: ${({ $color }) => $color};\n  }\n\n  ${match.isSM} {\n    top: 60%;\n\n    & > ul {\n      padding-left: 10%;\n      font-size: 1.5625rem;\n    }\n  }\n`\n\nconst Systems = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-position: center 40%;\n  background-repeat: no-repeat;\n  background-size: cover;\n`\n\nconst StickyContainer = styled.div`\n  position: relative;\n  height: 1000vh;\n`\n\nconst StyledConstellation = styled.div`\n  position: sticky;\n  top: 0;\n  width: 100%;\n  height: 100vh;\n  background-position: center 40%;\n  background-repeat: no-repeat;\n  background-size: cover;\n  overflow: hidden;\n`\n\nconst Universe = styled(Systems)`\n  perspective: 1000px;\n`\n\nconst Galaxy = styled(Systems)`\n  transform-style: preserve-3d;\n`\n\nconst SolarSystem = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 90vw;\n  height: 90vw;\n  transform: translate(-50%, -50%);\n  transform-style: preserve-3d;\n\n  & > * {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  ${match.isSM} {\n    width: 54vw;\n    height: 54vw;\n  }\n`\n\nconst StyledLogo = styled(KlickLogo)`\n  position: absolute;\n  width: 15%;\n`\n\nexport default Ecosystem\n"],"names":["gsap","registerPlugin","ScrollTrigger","anglePlayhead","playhead","gsapDefaults","duration","ease","Ecosystem","planets","stickyContainerRef","React","useRef","galaxyRef","planetsAngleTimeline","useInstance","timeline","paused","defaults","planetsWTimelines","map","planet","position","labelRef","createRef","contentRef","angleTimeline","orbitTimeline","megaTimeline","trailingPlanetLabels","useMemo","filter","item","trailingPlanetLabel","theme","useTheme","isMobile","useMediaQuery","breakpoints","down","planetJSX","planetContentJSX","forEach","props","index","push","color","content","useIsomorphicLayoutEffect","galaxy","current","stickyContainer","to","add","opacity","fromTo","startPosition","x","y","z","rotationX","includes","label","hasTrailingPlanet","wrapPositionBetweenRange","utils","wrap","trailingPlanet","find","p","currentPlanets","Boolean","currentPlanetLabels","set","clearProps","getPlanetLabelSettings","stagger","modifiers","pos","visibility","slice","reverse","scrollTrigger","create","trigger","scrub","start","end","animation","onUpdate","progress","clear","remove","kill","lookup","withTrailingPlanet","mobile","fontSize","undefined","desktop","withoutTrailingPlanet","planetKey","mobileKey","PlanetContent","styled","div","match","isLG","$color","isSM","Systems","StickyContainer","StyledConstellation","Universe","Galaxy","SolarSystem","StyledLogo","KlickLogo"],"mappings":";;;;;;;;;;;;;;AAgBAA,IAAI,CAACC,cAAL,CAAoBC,aAApB;AAEA,IAAMC,aAAa,GAAG;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB;AAEA,IAAMC,YAAY,GAAG;AAAEC,EAAAA,QAAQ,EAAE,CAAZ;AAAeC,EAAAA,IAAI,EAAE;AAArB,CAArB;;IAEMC,SAAS,GAAG,SAAZA,SAAY,OAAiB;AAAA,MAAdC,OAAc,QAAdA,OAAc;AACjC,MAAMC,kBAAkB,GAAGC,KAAK,CAACC,MAAN,EAA3B;AACA,MAAMC,SAAS,GAAGF,KAAK,CAACC,MAAN,EAAlB;AACA,MAAME,oBAAoB,GAAGC,WAAW,CAAC;AAAA,WACvCf,IAAI,CAACgB,QAAL,CAAc;AACZC,MAAAA,MAAM,EAAE,IADI;AAEZC,MAAAA,QAAQ,EAAEb;AAFE,KAAd,CADuC;AAAA,GAAD,CAAxC;AAMA,MAAMc,iBAAiB,GAAGJ,WAAW,CAAC,YAAM;AAC1C,WAAON,OAAO,CAACW,GAAR,CAAY,UAACC,MAAD;AAAA,+CACdA,MADc;AAEjBC,QAAAA,QAAQ,EAAE,CAFO;AAGjBC,QAAAA,QAAQ,eAAEZ,KAAK,CAACa,SAAN,EAHO;AAIjBC,QAAAA,UAAU,eAAEd,KAAK,CAACa,SAAN,EAJK;AAKjBE,QAAAA,aAAa,EAAEZ,oBALE;AAMjBa,QAAAA,aAAa,EAAE3B,IAAI,CAACgB,QAAL,CAAc;AAC3BC,UAAAA,MAAM,EAAE,IADmB;AAE3BC,UAAAA,QAAQ,EAAEb;AAFiB,SAAd;AANE;AAAA,KAAZ,CAAP;AAWD,GAZoC,CAArC;AAaA,MAAMuB,YAAY,GAAGb,WAAW,CAAC;AAAA,WAC/Bf,IAAI,CAACgB,QAAL,CAAc;AACZE,MAAAA,QAAQ,EAAEb;AADE,KAAd,CAD+B;AAAA,GAAD,CAAhC;AAKA,MAAMwB,oBAAoB,GAAGlB,KAAK,CAACmB,OAAN,CAAc,YAAM;AAC/C,WAAOrB,OAAO,CACXsB,MADI,CACG,UAACC,IAAD;AAAA,aAAU,CAAC,CAACA,IAAI,CAACC,mBAAjB;AAAA,KADH,EAEJb,GAFI,CAEA,UAACY,IAAD;AAAA,aAAUA,IAAI,CAACC,mBAAf;AAAA,KAFA,CAAP;AAGD,GAJ4B,EAI1B,CAACxB,OAAD,CAJ0B,CAA7B;AAMA,MAAMyB,KAAK,GAAGC,QAAQ,EAAtB;AACA,MAAMC,QAAQ,GAAGC,aAAa,CAACH,KAAK,CAACI,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,CAA9B;AAEA,MAAIC,SAAS,GAAG,EAAhB;AACA,MAAIC,gBAAgB,GAAG,EAAvB;AACAtB,EAAAA,iBAAiB,CAACuB,OAAlB,CAA0B,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAC1CJ,IAAAA,SAAS,CAACK,IAAV,eACE,oBAAC,MAAD;AACE,MAAA,GAAG,EAAED,KADP;AAEE,MAAA,QAAQ,EAAER,QAFZ;AAGE,MAAA,iBAAiB,EAAE,CAAC,CAACO,KAAK,CAACV;AAH7B,OAIMU,KAJN,EADF;AAQAF,IAAAA,gBAAgB,CAACI,IAAjB,eACE,oBAAC,aAAD;AACE,MAAA,GAAG,EAAEF,KAAK,CAAClB,UADb;AAEE,MAAA,OAAO,EAAC,QAFV;AAGE,MAAA,GAAG,EAAEmB,KAHP;AAIE,MAAA,MAAM,EAAED,KAAK,CAACG;AAJhB,OAMGH,KAAK,CAACI,OANT,CADF;AAUD,GAnBD;AAqBAC,EAAAA,yBAAyB,CAAC,YAAM;AAC9B,QAAMC,MAAM,GAAGpC,SAAS,CAACqC,OAAzB;AACA,QAAMC,eAAe,GAAGzC,kBAAkB,CAACwC,OAA3C,CAF8B;;AAK9BtB,IAAAA,YAAY,CAACwB,EAAb,CAAgB,EAAhB,EAAoB;AAAE9C,MAAAA,QAAQ,EAAE;AAAZ,KAApB,EAAqC+C,GAArC,CAAyC,MAAzC;AACAlC,IAAAA,iBAAiB,CAACuB,OAAlB,CAA0B,UAACrB,MAAD,EAAY;AACpCO,MAAAA,YAAY,CACTwB,EADH,CACM/B,MAAM,CAACE,QAAP,CAAgB2B,OADtB,EAC+B;AAAEI,QAAAA,OAAO,EAAE,CAAX;AAAchD,QAAAA,QAAQ,EAAE;AAAxB,OAD/B,EAC8D,MAD9D,EAEGiD,MAFH,CAGIlC,MAHJ,EAII;AAAEC,QAAAA,QAAQ,EAAED,MAAM,CAACmC;AAAnB,OAJJ,EAKI;AAAElC,QAAAA,QAAQ,EAAE;AAAZ,OALJ,EAMI,WANJ;AAQD,KATD;AAUAM,IAAAA,YAAY,CACTwB,EADH,CAEIH,MAFJ,EAGI;AACEQ,MAAAA,CAAC,EAAE,MADL;AAEEC,MAAAA,CAAC,EAAE,CAAC,GAFN;AAGEC,MAAAA,CAAC,EAAE,GAHL;AAIEC,MAAAA,SAAS,EAAExB,QAAQ,GAAG,EAAH,GAAQ,EAJ7B;AAKE9B,MAAAA,QAAQ,EAAE,CALZ;AAMEC,MAAAA,IAAI,EAAE;AANR,KAHJ,EAWI,MAXJ,EAaG6C,EAbH,CAcIjD,aAdJ,EAeI;AAAEC,MAAAA,QAAQ,EAAE,GAAZ;AAAiBE,MAAAA,QAAQ,EAAE,CAA3B;AAA8BC,MAAAA,IAAI,EAAE;AAApC,KAfJ,EAgBI,MAhBJ,EAhB8B;;AAoC9BqB,IAAAA,YAAY,CAACyB,GAAb,CAAiB,OAAjB;AACAlC,IAAAA,iBAAiB,CAACuB,OAAlB,CAA0B,UAACrB,MAAD,EAASuB,KAAT,EAAmB;AAAA;;AAC3C,UAAIf,oBAAoB,CAACgC,QAArB,CAA8BxC,MAAM,CAACyC,KAArC,CAAJ,EAAiD;AAEjD,UAAMf,OAAO,GAAG1B,MAAM,CAACI,UAAP,CAAkByB,OAAlC;AACA,UAAMa,iBAAiB,GAAG,CAAC,CAAC1C,MAAM,CAACY,mBAAnC,CAJ2C;;AAO3C,UAAM+B,wBAAwB,GAAGhE,IAAI,CAACiE,KAAL,CAAWC,IAAX,CAAgB,CAAhB,EAAmB,CAAnB,CAAjC;AAEA,UAAMC,cAAc,GAAGhD,iBAAiB,CAACiD,IAAlB,CACrB,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACP,KAAF,KAAYzC,MAAM,CAACY,mBAA1B;AAAA,OADqB,CAAvB;AAIA,UAAMqC,cAAc,GAAG,CAACjD,MAAD,EAAS8C,cAAT,EAAyBpC,MAAzB,CAAgCwC,OAAhC,CAAvB;AAEA,UAAMC,mBAAmB,GAAG,CAC1BnD,MAAM,CAACE,QAAP,CAAgB2B,OADU,EAE1BiB,cAF0B,aAE1BA,cAF0B,gDAE1BA,cAAc,CAAE5C,QAFU,0DAE1B,sBAA0B2B,OAFA,CAA5B;AAKAtB,MAAAA,YAAY,CACT6C,GADH,CACOD,mBADP,EAC4B;AAAEE,QAAAA,UAAU,EAAE;AAAd,OAD5B,EAEGD,GAFH,CAGID,mBAHJ,EAIIG,sBAAsB,CAAC;AAAEvC,QAAAA,QAAQ,EAARA,QAAF;AAAY2B,QAAAA,iBAAiB,EAAjBA;AAAZ,OAAD,CAJ1B,EAMGX,EANH,CAOIkB,cAPJ,EAQI;AACEhD,QAAAA,QAAQ,EAAEyC,iBAAiB,GAAG/D,IAAI,CAACiE,KAAL,CAAWC,IAAX,CAAgB,CAAC,IAAD,EAAO,IAAP,CAAhB,CAAH,GAAmC,IADhE;AAEE3D,QAAAA,IAAI,EAAE,YAFR;AAGEqE,QAAAA,OAAO,EAAE,IAHX;AAIEtE,QAAAA,QAAQ,EAAE,CAJZ;AAKEuE,QAAAA,SAAS,EAAE;AACTvD,UAAAA,QAAQ,EAAE,kBAACwD,GAAD;AAAA,mBAASd,wBAAwB,CAACc,GAAD,CAAjC;AAAA;AADD;AALb,OARJ,EAiBIlC,KAAK,KAAK,CAAV,GAAc,OAAd,GAAwB,OAjB5B,EAmBGQ,EAnBH,CAmBMoB,mBAnBN,EAmB2B;AAAElB,QAAAA,OAAO,EAAE;AAAX,OAnB3B,EAmB2C,KAnB3C,EAoBGF,EApBH,CAoBML,OApBN,EAoBe;AAAEO,QAAAA,OAAO,EAAE,CAAX;AAAcyB,QAAAA,UAAU,EAAE;AAA1B,OApBf,EAoBsD,GApBtD,EAqBG3B,EArBH,CAqBMkB,cArBN,EAqBsB;AAAEhD,QAAAA,QAAQ,EAAE,IAAZ;AAAkBf,QAAAA,IAAI,EAAE;AAAxB,OArBtB,EAqB6D,IArB7D,EAsBG6C,EAtBH,CAsBMoB,mBAtBN,EAsB2B;AAAElB,QAAAA,OAAO,EAAE,CAAX;AAAchD,QAAAA,QAAQ,EAAE;AAAxB,OAtB3B,EAsB0D,OAtB1D,EAuBGmE,GAvBH,CAwBID,mBAxBJ,EAyBIG,sBAAsB,CAAC;AAAEvC,QAAAA,QAAQ,EAARA,QAAF;AAAY2B,QAAAA,iBAAiB,EAAjBA;AAAZ,OAAD,CAzB1B,EA2BGU,GA3BH,CA2BOD,mBA3BP,EA2B4B;AAAEE,QAAAA,UAAU,EAAE;AAAd,OA3B5B,EA4BGtB,EA5BH,CA6BIL,OA7BJ,EA8BI;AAAEO,QAAAA,OAAO,EAAE,CAAX;AAAcyB,QAAAA,UAAU,EAAE,QAA1B;AAAoCzE,QAAAA,QAAQ,EAAE;AAA9C,OA9BJ,EA+BI,OA/BJ;AAiCD,KArDD,EArC8B;;AA6F9BsB,IAAAA,YAAY,CAACyB,GAAb,CAAiB,SAAjB;AACAlC,IAAAA,iBAAiB,CACd6D,KADH,GAEGC,OAFH,GAGGvC,OAHH,CAGW,UAACrB,MAAD,EAASuB,KAAT,EAAmB;AAC1B,UAAIvB,MAAM,CAACmC,aAAP,GAAuB,GAA3B,EAAgC;AAC9B5B,QAAAA,YAAY,CAACwB,EAAb,CACE/B,MADF,EAEE;AAAEC,UAAAA,QAAQ,EAAED,MAAM,CAACmC;AAAnB,SAFF,qBAGcZ,KAAK,GAAG,GAHtB;AAKD,OAND,MAMO;AACLhB,QAAAA,YAAY,CACTwB,EADH,CACM/B,MADN,EACc;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SADd,qBAC2CsB,KAAK,GAAG,GADnD,GAEGW,MAFH,CAGIlC,MAHJ,EAII;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAJJ,EAKI;AAAEA,UAAAA,QAAQ,EAAED,MAAM,CAACmC,aAAnB;AAAkCjD,UAAAA,IAAI,EAAE;AAAxC,SALJ,EAMI,GANJ;AAQD;;AACDqB,MAAAA,YAAY,CAACwB,EAAb,CACE/B,MAAM,CAACE,QAAP,CAAgB2B,OADlB,EAEE;AAAEI,QAAAA,OAAO,EAAE,CAAX;AAAchD,QAAAA,QAAQ,EAAE;AAAxB,OAFF,EAGE,OAHF;AAKD,KAzBH;AA0BAsB,IAAAA,YAAY,CACTwB,EADH,CAEIH,MAFJ,EAGI;AACEQ,MAAAA,CAAC,EAAE,IADL;AAEEC,MAAAA,CAAC,EAAE,CAFL;AAGEC,MAAAA,CAAC,EAAE,CAHL;AAIEC,MAAAA,SAAS,EAAE,CAJb;AAKEtD,MAAAA,QAAQ,EAAE,CALZ;AAMEC,MAAAA,IAAI,EAAE;AANR,KAHJ,EAWI,cAXJ,EAaG6C,EAbH,CAcIjD,aAdJ,EAeI;AAAEC,MAAAA,QAAQ,EAAE,CAAZ;AAAeE,MAAAA,QAAQ,EAAE,CAAzB;AAA4BC,MAAAA,IAAI,EAAE;AAAlC,KAfJ,EAgBI,cAhBJ,EAkBG6C,EAlBH,CAkBM,EAlBN,EAkBU;AAAE9C,MAAAA,QAAQ,EAAE;AAAZ,KAlBV;AAoBA,QAAM4E,aAAa,GAAGhF,aAAa,CAACiF,MAAd,CAAqB;AACzCC,MAAAA,OAAO,EAAEjC,eADgC;AAEzCkC,MAAAA,KAAK,EAAE,IAFkC;AAGzCC,MAAAA,KAAK,EAAE,SAHkC;AAIzCC,MAAAA,GAAG,EAAE,eAJoC;AAKzCC,MAAAA,SAAS,EAAE5D,YAL8B;AAMzC6D,MAAAA,QAAQ,EAAE,oBAAY;AACpB3E,QAAAA,oBAAoB,CAAC4E,QAArB,CAA8BvF,aAAa,CAACC,QAAd,IAA0B,CAAxD;AAEAe,QAAAA,iBAAiB,CAACuB,OAAlB,CAA0B,UAACrB,MAAD,EAAY;AACpCA,UAAAA,MAAM,CAACM,aAAP,CAAqB+D,QAArB,CAA8BrE,MAAM,CAACC,QAAP,IAAmBD,MAAM,CAACmC,aAAxD;AACD,SAFD;AAGD;AAZwC,KAArB,CAAtB;AAeA,WAAO,YAAM;AACX1C,MAAAA,oBAAoB,CAAC6E,KAArB;AACA/D,MAAAA,YAAY,CAACgE,MAAb,CAAoB9E,oBAApB;AAEAK,MAAAA,iBAAiB,CAACuB,OAAlB,CAA0B,UAACrB,MAAD,EAAY;AACpCA,QAAAA,MAAM,CAACM,aAAP,CAAqBgE,KAArB;AACD,OAFD;AAGA/D,MAAAA,YAAY,CAAC+D,KAAb;AACAT,MAAAA,aAAa,CAACW,IAAd;AACD,KATD;AAUD,GArKwB,EAqKtB,CACDjE,YADC,EAEDd,oBAFC,EAGDK,iBAHC,EAIDiB,QAJC,EAKDP,oBALC,CArKsB,CAAzB;AA6KA,sBACE,oBAAC,eAAD;AAAiB,IAAA,GAAG,EAAEnB;AAAtB,kBACE,oBAAC,mBAAD,qBACE,oBAAC,QAAD,qBACE,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAEG;AAAb,kBACE,oBAAC,WAAD,qBACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAC;AAAZ,IADF,eAEE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAC;AAAZ,IAFF,eAGE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAC,KAAZ;AAAkB,IAAA,KAAK,EAAC;AAAxB,IAHF,eAIE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAC;AAAtB,IAJF,EAKG2B,SALH,CADF,CADF,EAUGC,gBAVH,CADF,CADF,CADF;AAkBD;;AAED,SAASkC,sBAAT,QAAiE;AAAA,MAA/BvC,QAA+B,SAA/BA,QAA+B;AAAA,MAArB2B,iBAAqB,SAArBA,iBAAqB;AAC/D,MAAM+B,MAAM,GAAG;AACbC,IAAAA,kBAAkB,EAAE;AAClBC,MAAAA,MAAM,EAAE;AACNC,QAAAA,QAAQ,EAAE,KADJ;AAENxC,QAAAA,CAAC,EAAEzD,IAAI,CAACiE,KAAL,CAAWC,IAAX,CAAgB,CAAC,OAAD,EAAUgC,SAAV,CAAhB,CAFG;AAGNxC,QAAAA,CAAC,EAAE1D,IAAI,CAACiE,KAAL,CAAWC,IAAX,CAAgB,CAAC,KAAD,EAAQgC,SAAR,CAAhB;AAHG,OADU;AAMlBC,MAAAA,OAAO,EAAE;AACPF,QAAAA,QAAQ,EAAEjG,IAAI,CAACiE,KAAL,CAAWC,IAAX,CAAgB,CAAC,KAAD,EAAQ,KAAR,CAAhB,CADH;AAEPT,QAAAA,CAAC,EAAEzD,IAAI,CAACiE,KAAL,CAAWC,IAAX,CAAgB,CAAC,KAAD,EAAQgC,SAAR,CAAhB,CAFI;AAGPxC,QAAAA,CAAC,EAAE1D,IAAI,CAACiE,KAAL,CAAWC,IAAX,CAAgB,CAAC,KAAD,EAAQgC,SAAR,CAAhB;AAHI;AANS,KADP;AAabE,IAAAA,qBAAqB,EAAE;AACrBJ,MAAAA,MAAM,EAAE;AACNC,QAAAA,QAAQ,EAAE;AADJ,OADa;AAIrBE,MAAAA,OAAO,EAAE;AACPF,QAAAA,QAAQ,EAAE;AADH;AAJY;AAbV,GAAf;AAuBA,MAAMI,SAAS,GAAGtC,iBAAiB,GAC/B,oBAD+B,GAE/B,uBAFJ;AAGA,MAAMuC,SAAS,GAAGlE,QAAQ,GAAG,QAAH,GAAc,SAAxC;AAEA,SAAO0D,MAAM,CAACO,SAAD,CAAN,CAAkBC,SAAlB,CAAP;AACD;;AAED,IAAMC,aAAa,GAAGC,MAAM,CAACC,GAAV,usBAabC,KAAK,CAACC,IAbO,EA8BN;AAAA,MAAGC,MAAH,SAAGA,MAAH;AAAA,SAAgBA,MAAhB;AAAA,CA9BM,EAiCfF,KAAK,CAACG,IAjCS,CAAnB;AA2CA,IAAMC,OAAO,GAAGN,MAAM,CAACC,GAAV,iOAAb;AASA,IAAMM,eAAe,GAAGP,MAAM,CAACC,GAAV,mHAArB;AAKA,IAAMO,mBAAmB,GAAGR,MAAM,CAACC,GAAV,gQAAzB;AAWA,IAAMQ,QAAQ,GAAGT,MAAM,CAACM,OAAD,CAAT,iGAAd;AAIA,IAAMI,MAAM,GAAGV,MAAM,CAACM,OAAD,CAAT,0GAAZ;AAIA,IAAMK,WAAW,GAAGX,MAAM,CAACC,GAAV,gdAmBbC,KAAK,CAACG,IAnBO,CAAjB;AAyBA,IAAMO,UAAU,GAAGZ,MAAM,CAACa,SAAD,CAAT,+GAAhB;;;;"}