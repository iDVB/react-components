{"version":3,"file":"Planet.js","sources":["../../../src/Ecosystem/Planet.js"],"sourcesContent":["import React from 'react'\nimport { useIsomorphicLayoutEffect } from 'react-use'\nimport styled, { css } from 'styled-components'\n\nimport { match } from '../_contexts/Theme'\nimport { P } from '../Typography/Typography'\n\nconst Planet = ({\n  orbitTimeline,\n  angleTimeline,\n  labelRef,\n  startPosition,\n  color,\n  size,\n  label,\n  isMobile,\n  hasTrailingPlanet,\n}) => {\n  const pointRef = React.useRef()\n  const planetRef = React.useRef()\n  const solarPathRef = React.useRef()\n\n  useIsomorphicLayoutEffect(() => {\n    const point = pointRef.current\n    const planet = planetRef.current\n    const solarPath = solarPathRef.current\n    const label = labelRef.current\n\n    angleTimeline\n      .to(point, { rotateX: isMobile ? -45 : -65, duration: 0.5 }, 0)\n      .to(point, { rotateX: 0, duration: 0.5 }, 0.5)\n\n    orbitTimeline\n      .add('rotate')\n      .set(point, { rotateY: 0, rotateZ: 360 }, 'rotate')\n      .fromTo(\n        planet,\n        {\n          backgroundPositionX: '50%',\n        },\n        {\n          duration: 0.25,\n          backgroundPositionX: '58%',\n        },\n        'rotate'\n      )\n      .fromTo(\n        planet,\n        {\n          backgroundPositionX: '58%',\n        },\n        {\n          duration: 0.25,\n          backgroundPositionX: '72%',\n        }\n      )\n      .call(() => {\n        if (orbitTimeline.progress() > 0.5) {\n          return label.classList.add('onleft')\n        }\n        return label.classList.remove('onleft')\n      })\n      .fromTo(\n        planet,\n        {\n          backgroundPositionX: '28%',\n        },\n        {\n          duration: 0.25,\n          backgroundPositionX: '42%',\n        }\n      )\n      .fromTo(\n        planet,\n        {\n          backgroundPositionX: '42%',\n        },\n        {\n          duration: 0.25,\n          backgroundPositionX: '50%',\n        }\n      )\n      .fromTo(solarPath, { rotateZ: 0 }, { rotateZ: 360 }, 'rotate')\n      .to(point, { rotateY: 0, rotateZ: 0 }, 'rotate')\n\n    orbitTimeline.progress(startPosition)\n  }, [angleTimeline, orbitTimeline, startPosition, size, labelRef, isMobile])\n\n  return (\n    <SolarPath ref={solarPathRef}>\n      <Point ref={pointRef}>\n        <PlanetOrb ref={planetRef} $color={color} $size={size} />\n        <Label\n          ref={labelRef}\n          $size={size}\n          variant=\"blurb2\"\n          component=\"h3\"\n          $hasTrailingPlanet={hasTrailingPlanet}\n        >\n          {label}\n        </Label>\n      </Point>\n    </SolarPath>\n  )\n}\n\nconst SolarPath = styled.div`\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  transform-style: preserve-3d;\n`\n\nconst PlanetOrb = styled.div`\n  position: absolute;\n  ${({ $size }) => {\n    const sxSize = $size * 2\n    return css`\n      width: ${sxSize}vw;\n      height: ${sxSize}vw;\n      margin-top: -${sxSize / 2}vw;\n      margin-left: -${sxSize / 2}vw;\n    `\n  }}\n  top: 0;\n  border-radius: 50%;\n  transform-style: preserve-3d;\n  background: ${({ $color }) => $color};\n  background-image: radial-gradient(\n    circle,\n    rgba(0, 0, 0, 0) 10%,\n    rgba(0, 0, 0, 0.7) 30%\n  );\n  background-position-y: 50%;\n  background-size: 1000%;\n  background-repeat: no-repeat;\n\n  ${match.isSM} {\n    ${({ $size }) => css`\n      width: ${$size}vw;\n      height: ${$size}vw;\n      margin-top: -${$size / 2}vw;\n      margin-left: -${$size / 2}vw;\n    `}\n  }\n`\n\nconst Point = styled.div`\n  position: absolute;\n  transform-style: preserve-3d;\n  left: 50%;\n  top: -1px;\n  border: solid 3px red;\n`\n\nconst Label = styled(P)`\n  position: absolute;\n  top: 50%;\n  left: 0;\n  text-align: left;\n  font-size: 5vw;\n  line-height: 0.9em;\n  text-shadow: 0.1em 0.1em 0.2em #00000052;\n  ${({ $hasTrailingPlanet }) => {\n    return (\n      $hasTrailingPlanet &&\n      css`\n        margin-top: 20px;\n        margin-left: 20px;\n      `\n    )\n  }}\n\n  ${({ $size }) => css`\n    transform: translate(-100%, -50%) translateX(-${$size / 2 + 2}vw);\n    text-align: right;\n    &.onleft {\n      text-align: left;\n      transform: translate(${$size / 2 + 2}vw, -50%);\n    }\n\n    ${match.isSM} {\n      font-size: 2vw;\n      text-align: left;\n      transform-origin: left;\n      transform: translate(${$size / 2 + 2}vw, -50%);\n\n      &.selected {\n        font-size: 4vw;\n      }\n\n      &.onleft {\n        transform: translate(-100%, -50%) translateX(-${$size / 2 + 2}vw);\n      }\n    }\n  `}\n`\n\nexport default Planet\n"],"names":["Planet","orbitTimeline","angleTimeline","labelRef","startPosition","color","size","label","isMobile","hasTrailingPlanet","pointRef","React","useRef","planetRef","solarPathRef","useIsomorphicLayoutEffect","point","current","planet","solarPath","to","rotateX","duration","add","set","rotateY","rotateZ","fromTo","backgroundPositionX","call","progress","classList","remove","SolarPath","styled","div","PlanetOrb","$size","sxSize","css","$color","match","isSM","Point","Label","P","$hasTrailingPlanet"],"mappings":"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"}