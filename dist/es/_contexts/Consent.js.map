{"version":3,"file":"Consent.js","sources":["../../../src/_contexts/Consent.js"],"sourcesContent":["import React from 'react'\n\nimport { tracking } from '../_common/tracking'\n\nconst ConsentContext = React.createContext()\n\nconst STATES = {\n  banner: 'banner',\n  modal: 'modal',\n  hidden: 'hidden',\n}\n\nfunction _useConsent() {\n  const [cookiesUIState, setCookiesUIState] = React.useState(STATES.hidden)\n  const consentValue = tracking.getConsentValue()\n\n  const isPristine = !consentValue\n  const hasConsent = tracking.getHasConsent()\n\n  const isCookieBannerVisible = cookiesUIState === STATES.banner\n  const isCookieModalVisible = cookiesUIState === STATES.modal\n  const isCookieSettingsHidden = cookiesUIState === STATES.hidden\n\n  function acceptCookies() {\n    tracking.optIn()\n\n    tracking.track('Cookies Accepted', {\n      category: 'Page Interactions',\n      action: 'Privacy Opt In',\n      label: 'Cookie Banner',\n      value: tracking.getConsentValue(),\n    })\n  }\n\n  function rejectCookies() {\n    tracking.optOut()\n  }\n\n  const showCookiesModal = React.useCallback(() => {\n    setCookiesUIState(STATES.modal)\n  }, [])\n\n  const closeCookiesModal = React.useCallback(() => {\n    const nextState = isPristine ? STATES.banner : STATES.hidden\n    setCookiesUIState(nextState)\n  }, [isPristine])\n\n  const showCookiesBanner = React.useCallback(() => {\n    setCookiesUIState(STATES.banner)\n  }, [])\n\n  const closeCookiesBanner = React.useCallback(() => {\n    setCookiesUIState(STATES.hidden)\n  }, [])\n\n  const toggleCookies = hasConsent ? rejectCookies : acceptCookies\n\n  return {\n    hasConsent,\n    isPristine,\n    isCookieBannerVisible,\n    isCookieModalVisible,\n    isCookieSettingsHidden,\n    acceptCookies,\n    rejectCookies,\n    toggleCookies,\n    showCookiesModal,\n    closeCookiesModal,\n    showCookiesBanner,\n    closeCookiesBanner,\n  }\n}\n\nconst ConsentProvider = ({ children }) => {\n  const consent = _useConsent()\n\n  return (\n    <ConsentContext.Provider value={consent}>\n      {children}\n    </ConsentContext.Provider>\n  )\n}\n\nconst useConsentContext = () => {\n  const context = React.useContext(ConsentContext)\n  if (context === undefined) {\n    throw new Error('useConsentContext must be used within a ConsentProvider')\n  }\n  return context\n}\n\nexport { ConsentProvider, useConsentContext }\n"],"names":["ConsentContext","React","createContext","STATES","banner","modal","hidden","_useConsent","useState","cookiesUIState","setCookiesUIState","consentValue","tracking","getConsentValue","isPristine","hasConsent","getHasConsent","isCookieBannerVisible","isCookieModalVisible","isCookieSettingsHidden","acceptCookies","optIn","track","category","action","label","value","rejectCookies","optOut","showCookiesModal","useCallback","closeCookiesModal","nextState","showCookiesBanner","closeCookiesBanner","toggleCookies","ConsentProvider","children","consent","useConsentContext","context","useContext","undefined","Error"],"mappings":"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"}