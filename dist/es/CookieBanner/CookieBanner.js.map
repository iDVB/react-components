{"version":3,"file":"CookieBanner.js","sources":["../../../src/CookieBanner/CookieBanner.js"],"sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Box, FormControlLabel, Switch, withStyles } from '@material-ui/core'\nimport styled from 'styled-components'\n\nimport { useConsentContext } from '../_contexts/Consent'\nimport Button from '../Button/Button'\nimport Dialog from '../Dialog/Dialog'\nimport { Heading, P } from '../Typography/Typography'\n\nconst CookieBanner = () => {\n  const {\n    acceptCookies,\n    isPristine,\n    isCookieBannerVisible,\n    showCookiesBanner,\n    showCookiesModal,\n    closeCookiesBanner,\n  } = useConsentContext()\n\n  const [isMounted, setIsMounted] = React.useState()\n\n  React.useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  React.useEffect(() => {\n    if (isPristine) showCookiesBanner()\n  }, [isPristine, showCookiesBanner])\n\n  function accept() {\n    acceptCookies()\n    closeCookiesBanner()\n  }\n\n  if (!isMounted) return null\n\n  return ReactDOM.createPortal(\n    <div>\n      <Banner isClosed={!isCookieBannerVisible}>\n        <BannerContainer>\n          <BannerCopy variant=\"body2\">\n            We use cookies and other tracking technologies to assist with\n            navigation, analyze your use of our services, and assist with our\n            promotional and marketing efforts.{' '}\n            <BannerTextButton onClick={showCookiesModal}>\n              View cookie options\n            </BannerTextButton>\n          </BannerCopy>\n          <BannerButton aria-label=\"Accept\" onClick={accept}>\n            Accept\n          </BannerButton>\n        </BannerContainer>\n      </Banner>\n      <CookieDialog />\n    </div>,\n    document.body\n  )\n}\n\nfunction CookieDialog() {\n  const {\n    hasConsent,\n    acceptCookies,\n    rejectCookies,\n    isCookieModalVisible,\n    closeCookiesModal,\n    closeCookiesBanner,\n  } = useConsentContext()\n\n  const [tempHasConsent, setTempHasConsent] = React.useState(hasConsent)\n\n  const cancelAndClose = React.useCallback(\n    async function () {\n      setTempHasConsent(hasConsent)\n      if (hasConsent !== tempHasConsent) {\n        // Note: This gives a small delay so that you can see the settings will revert on cancel.\n        await sleep(350)\n      }\n      closeCookiesModal()\n    },\n    [hasConsent, tempHasConsent, setTempHasConsent, closeCookiesModal]\n  )\n\n  function toggleTemporaryCookiesState() {\n    setTempHasConsent((state) => !state)\n  }\n\n  const saveSettings = () => {\n    tempHasConsent ? acceptCookies() : rejectCookies()\n    closeCookiesBanner()\n  }\n\n  return (\n    <div>\n      <Dialog\n        open={isCookieModalVisible}\n        disableBackdropClick\n        onClose={cancelAndClose}\n        dialogTitle={\n          <Heading variant=\"h5\" component=\"h2\">\n            Cookies at Klick.\n          </Heading>\n        }\n        dialogContent={\n          <>\n            <P variant=\"blurb2\">\n              We use cookies and other tracking technologies to assist with\n              navigation, analyze your use of our services, and assist with our\n              promotional and marketing efforts.\n            </P>\n            <Box display=\"flex\" alignItems=\"center\">\n              <FormControlLabel\n                control={\n                  <IOSStyleSwitch\n                    checked={tempHasConsent}\n                    onChange={toggleTemporaryCookiesState}\n                    name=\"consent-toggle\"\n                    inputProps={{ 'aria-label': 'consent checkbox' }}\n                  />\n                }\n                label={\n                  tempHasConsent ? 'Tracking Enabled' : 'Tracking Disabled'\n                }\n              />\n            </Box>\n          </>\n        }\n        dialogActions={\n          <>\n            <Button onClick={cancelAndClose} color=\"default\">\n              Cancel\n            </Button>\n            <Button onClick={saveSettings} color=\"primary\">\n              Save\n            </Button>\n          </>\n        }\n      />\n    </div>\n  )\n}\n\nasync function sleep(ms) {\n  await new Promise((resolve) => setTimeout(resolve, ms))\n}\n\nconst IOSStyleSwitch = withStyles((theme) => {\n  const padding = 2\n  const width = 48\n  const height = 28\n  const radius = height - padding * 2\n  const xTransform = width - radius - padding * 2\n\n  return {\n    root: {\n      width: width,\n      height: height,\n      padding: 0,\n      margin: theme.spacing(1),\n    },\n    switchBase: {\n      padding: padding,\n      color: 'white',\n      '&$checked': {\n        color: 'white',\n        transform: `translateX(${xTransform}px)`,\n        '& + $track': {\n          backgroundColor: theme.palette.primary.main,\n          opacity: 1,\n          border: 'none',\n        },\n      },\n      '&$focusVisible $thumb': {\n        color: theme.palette.primary.main,\n        border: '6px solid #fff',\n      },\n    },\n    thumb: {\n      width: radius,\n      height: radius,\n    },\n    track: {\n      borderRadius: height / 2,\n      border: `2px solid ${theme.palette.grey[300]}`,\n      backgroundColor: theme.palette.grey[300],\n      opacity: 1,\n      transition: theme.transitions.create(['background-color', 'border']),\n    },\n    checked: {},\n    focusVisible: {},\n  }\n})(({ classes, ...props }) => {\n  return (\n    <Switch\n      focusVisibleClassName={classes.focusVisible}\n      disableRipple\n      classes={{\n        root: classes.root,\n        switchBase: classes.switchBase,\n        thumb: classes.thumb,\n        track: classes.track,\n        checked: classes.checked,\n      }}\n      {...props}\n    />\n  )\n})\n\nconst Banner = styled.div`\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  color: #ffffff;\n  background-color: #000000;\n  font-family: ${({ theme }) => theme.typography.fontFamily};\n  font-size: 12px;\n  transition: all 0.3s;\n  transform: ${({ isClosed }) =>\n    isClosed ? 'translateY(500px)' : 'translateY(0)'};\n  z-index: 9999;\n`\n\nconst BannerContainer = styled.div`\n  margin: 0;\n  padding: 20px;\n\n  @media (min-width: 600px) {\n    display: flex;\n    align-items: center;\n    padding: 20px;\n  }\n\n  @media (min-width: 960px) {\n    margin: 0 7.5%;\n    padding: 20px 0;\n  }\n`\n\nconst BannerCopy = styled(P)`\n  margin: 0 0 20px 0;\n  padding: 0;\n\n  @media (min-width: 600px) {\n    flex: 1 1 auto;\n    margin: 0 20px 0 0;\n  }\n`\n\nconst BannerTextButton = styled.button`\n  color: #ffffff;\n  background: none;\n  border: none;\n  text-decoration: underline;\n`\n\n// TODO: use Button from klick react-components package\nconst BannerButton = styled.button`\n  margin: 0;\n  padding: 20px 10px;\n  font-weight: bold;\n  text-align: center;\n  width: 100%;\n  color: #000000;\n  background-color: #ffffff;\n  border: 1px solid #ffffff;\n  cursor: pointer;\n\n  @media (min-width: 600px) {\n    padding: 10px;\n    flex: 0 0 100px;\n  }\n`\n\nexport default CookieBanner\n"],"names":["CookieBanner","useConsentContext","acceptCookies","isPristine","isCookieBannerVisible","showCookiesBanner","showCookiesModal","closeCookiesBanner","React","useState","isMounted","setIsMounted","useEffect","accept","ReactDOM","createPortal","document","body","CookieDialog","hasConsent","rejectCookies","isCookieModalVisible","closeCookiesModal","tempHasConsent","setTempHasConsent","cancelAndClose","useCallback","sleep","toggleTemporaryCookiesState","state","saveSettings","Dialog","ms","Promise","resolve","setTimeout","IOSStyleSwitch","withStyles","theme","padding","width","height","radius","xTransform","root","margin","spacing","switchBase","color","transform","backgroundColor","palette","primary","main","opacity","border","thumb","track","borderRadius","grey","transition","transitions","create","checked","focusVisible","classes","props","Banner","styled","div","typography","fontFamily","isClosed","BannerContainer","BannerCopy","P","BannerTextButton","button","BannerButton"],"mappings":"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"}