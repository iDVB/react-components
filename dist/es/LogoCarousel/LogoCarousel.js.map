{"version":3,"file":"LogoCarousel.js","sources":["../../../src/LogoCarousel/LogoCarousel.js"],"sourcesContent":["import React from 'react'\nimport { useIsomorphicLayoutEffect } from 'react-use'\nimport { gsap } from 'gsap'\nimport { ExpoScaleEase } from 'gsap/EasePack'\nimport styled from 'styled-components'\n\nimport { match } from '../_contexts/Theme'\nimport useInstance from '../_hooks/useInstance'\n\ngsap.registerPlugin(ExpoScaleEase)\n\nconst LogoCarousel = ({ children, columnNum = 6 }) => {\n  const columns = chunkToColumns(children, columnNum)\n\n  let columnRefs = useInstance(() => new Array(columnNum))\n  const columnJSX = columns.map((column, i) => {\n    if (!columnRefs[i]) columnRefs[i] = []\n    const logos = [...column, column[0]].map((logo, ii) => {\n      const ref = React.createRef()\n      columnRefs[i][ii] = ref\n      return (\n        <LogoWrapper key={ii} ref={ref}>\n          {logo}\n        </LogoWrapper>\n      )\n    })\n    return <Column key={i}>{logos}</Column>\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    const timelines = []\n    columnRefs.forEach((column) => {\n      const timeline = gsap.timeline({ paused: true, repeat: -1 })\n      const logos = column.map((logo) => logo.current)\n      logos.forEach((logo, i) => {\n        if (i) {\n          timeline.fromTo(\n            logo,\n            {\n              opacity: 0,\n              rotationX: -80,\n              yPercent: 50,\n            },\n            {\n              duration: 0.5,\n              opacity: 1,\n              rotationX: 0,\n              yPercent: 0,\n              ease: 'power2',\n            },\n            i === 0 ? 0 : '<'\n          )\n          timeline.addPause()\n        }\n        if (i !== logos.length - 1) {\n          timeline.to(\n            logos,\n            {\n              duration: 0.5,\n              opacity: 0,\n              rotationX: 80,\n              yPercent: -50,\n              ease: 'power2',\n            },\n            '+=1'\n          )\n        }\n      })\n      timelines.push(timeline)\n    })\n\n    let interval = setInterval(() => {\n      const randomTlIndex = randomIntFromInterval(0, timelines.length - 1)\n      timelines[randomTlIndex].play()\n    }, 3000)\n\n    return () => {\n      timelines.forEach((timeline) => {\n        timeline.clear()\n      })\n      clearInterval(interval)\n    }\n  }, [columnRefs])\n\n  return <LogoCarouselContainer>{columnJSX}</LogoCarouselContainer>\n}\n\nfunction randomIntFromInterval(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nconst chunkToColumns = (array, size = 1) => {\n  if (size !== 1) size = Math.ceil(parseInt(size, 10))\n  const length = array == null ? 0 : array.length\n  if (!length) return []\n\n  let result = Array(size)\n  let i = 0\n  array.forEach((item) => {\n    if (!result[i]) result[i] = []\n    result[i].push(item)\n    i = i === size - 1 ? 0 : i + 1\n  })\n  return result\n}\n\nconst LogoCarouselContainer = styled.ul`\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n`\n\nconst LogoWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  & > * {\n    width: 100%;\n  }\n\n  &:not(:first-child) {\n    position: absolute;\n    top: 0;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n`\n\nconst Column = styled.li`\n  position: relative;\n  width: 50%;\n\n  ${match.isSM} {\n    width: 25%;\n  }\n\n  ${match.isMD} {\n    width: 16.6666%;\n  }\n`\n\nexport default LogoCarousel\n"],"names":["gsap","registerPlugin","ExpoScaleEase","LogoCarousel","children","columnNum","columns","chunkToColumns","columnRefs","useInstance","Array","columnJSX","map","column","i","logos","logo","ii","ref","React","createRef","useIsomorphicLayoutEffect","timelines","forEach","timeline","paused","repeat","current","fromTo","opacity","rotationX","yPercent","duration","ease","addPause","length","to","push","interval","setInterval","randomTlIndex","randomIntFromInterval","play","clear","clearInterval","min","max","Math","floor","random","array","size","ceil","parseInt","result","item","LogoCarouselContainer","styled","ul","LogoWrapper","div","Column","li","match","isSM","isMD"],"mappings":"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"}